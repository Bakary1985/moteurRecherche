{% extends 'base.html.twig' %}

{% block title %}les produits
{% endblock %}

{% block body %}
	<div class="container" style="margin-top: 80px">
		<div id="myModal" class="myClassHide" role="alert">
			Veuiller vous connecter pour ajouter aux favoris
			<span>
				<strong>Fermer</strong>
			</span>
		</div>

		<div class="row">
			<div class="col-3">
				{{ form_start(form)}}
				<h4>Recherche</h4>
				{{ form_row(form.q)}}
				<h4>Catégories</h4>
				{{ form_row(form.category)}}
				<h4>Prix</h4>

				<div class="row">
					<div class="col-6">{{ form_row(form.min)}}</div>
					<div class="col-6">{{ form_row(form.max)}}</div>
				</div>
				<h4>En promo</h4>

				{{ form_row(form.promo)}}

				<button type="submit" class=" btn btn-primary w-100">Filter</button>
				{{ form_end(form)}}
			</div>

			<div class="col-9">
				<div class="row">
					{% for product in pagination %}
						<div class="col-4" style="margin-bottom: 20px">
							<div class="card">
								<img class="card-img-top" src="{{product.image}}" alt="Card image cap">
								<div class="card-body" style="height: 200px">
									<p class="card-title">
										{{product.name}}
										{% if product.promo %}
											<span class="text text-warning float-right">
												promo !</span>
										{% endif %}
									</p>
									<p class="card-title">
										{{product.price}}
										€
										<a href=" {{ path('favoris', { 'id':product.id } )}} " class="float-right js-favoris">
											{% if app.user and product.postFavoris(app.user) %}
												<i class="fas fa-heart"></i>
											{% else %}
												<i class="far fa-heart"></i>
											{% endif %}
										</a>
									</p>
									{% for c in product.categories %}
										<em class="text-danger">{{ c.name|e }}</em>
									{% endfor %}
								</div>
							</div>
						</div>
					{% endfor %}
				</div>
<div class="navigation">
	{{ knp_pagination_render(pagination) }}
</div>

			</div>

		</div>
		

	</div>
{% endblock %}

